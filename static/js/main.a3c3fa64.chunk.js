(this["webpackJsonpformula-editor"]=this["webpackJsonpformula-editor"]||[]).push([[0],{101:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(10),s=n.n(i),o=(n(101),n(150)),c=n(11),u=n(47),l=function(){return Object(u.b)()},d=u.c,p=n(57),b=Object(p.b)({name:"code",initialState:{value:"",index:0,brace:!1,update_tree:!1,data:{},drawer:!1,text:!0},reducers:{setCode:function(e,t){e.value=t.payload},setData:function(e,t){e.data=t.payload},setCurrentIndex:function(e,t){e.index=t.payload},toggleBrace:function(e){e.brace=!e.brace},updateTree:function(e){e.update_tree=!e.update_tree},toggleDrawer:function(e){e.drawer=!e.drawer},toggleText:function(e){e.text=!e.text}}}),h=b.actions,f=h.setCode,j=h.setCurrentIndex,g=h.toggleBrace,y=h.updateTree,m=h.setData,x=h.toggleDrawer,O=h.toggleText,_=function(e){return e.code.value},v=function(e){return e.code.index},N=function(e){return e.code.brace},w=function(e){return e.code.update_tree},R=function(e){return e.code.data},C=function(e){return e.code.drawer},k=function(e){return e.code.text},S=b.reducer,T=n(138),E=Object(T.a)({box:{display:"flex",alignItems:"center",flexDirection:function(e){return e.state?"column":"row"},cursor:"pointer",borderLeft:function(e){return e.brace?"2px solid black":"none"},borderRight:function(e){return e.brace?"2px solid black":"none"},margin:5,padding:5,position:"relative",borderRadius:10},mid:{margin:15,fontSize:25},btn:{position:"absolute",top:-18,right:-12},icon:{fontSize:15}}),A=n(155),I=n(149),P=n(143),D=n(70),F=n(71),z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OPERAND";Object(D.a)(this,e),this.node_type=void 0,this.index=void 0,this.value=void 0,this.left=void 0,this.right=void 0,this.args=void 0,this.arbitrary_args=void 0,this.user_input=void 0,this.expected_type=void 0,this.type=void 0,this.type_error=void 0,this.index=t,this.node_type=n,this.value="",this.left=null,this.right=null,this.args=[],this.user_input=!1,this.arbitrary_args=!1,this.expected_type="any",this.type="any",this.type_error=!1}return Object(F.a)(e,[{key:"setValue",value:function(e){this.value=e}},{key:"addArguments",value:function(t){for(var n=0,r=t?t.length:1;n<r;){e.count++;var a=new e(e.count);a.expected_type=t?t[n]:this.args[0].type,this.args.push(a),n++}}},{key:"setLeft",value:function(t){e.count++,this.left=new e(e.count),this.left.expected_type=t}},{key:"setRight",value:function(t){e.count++,this.right=new e(e.count),this.right.expected_type=t}},{key:"setArgs",value:function(t,n){e.count++,this.right=new e(e.count,"ARGS"),this.right.arbitrary_args=t,n&&this.right.addArguments(n)}},{key:"checkType",value:function(){this.type_error="any"!==this.expected_type&&this.expected_type!==this.type}}]),e}();z.count=0;var L=new(function(){function e(){Object(D.a)(this,e),this.root=new z}return Object(F.a)(e,[{key:"find",value:function(e){return this.root.index===e?this.root:"OPERAND"===this.root.node_type||"OPERATOR"===this.root.node_type?this._find(this.root.left,e)||this._find(this.root.right,e):"FUNCTION"===this.root.node_type?this._find(this.root.args[0],e)||this._find(this.root.args[1],e)||this._find(this.root.args[2],e)||this._find(this.root.args[3],e)||this._find(this.root.args[4],e)||this._find(this.root.args[5],e)||this._find(this.root.args[6],e)||this._find(this.root.args[7],e)||this._find(this.root.args[8],e)||this._find(this.root.args[9],e):null}},{key:"_find",value:function(e,t){if(e)return e.index===t?e:"OPERAND"===e.node_type||"OPERATOR"===e.node_type?this._find(e.left,t)||this._find(e.right,t):"FUNCTION"===e.node_type||"ARGS"===e.node_type?this._find(e.args[0],t)||this._find(e.args[1],t)||this._find(e.args[2],t)||this._find(e.args[3],t)||this._find(e.args[4],t)||this._find(e.args[5],t)||this._find(e.args[6],t)||this._find(e.args[7],t)||this._find(e.args[8],t)||this._find(e.args[9],t):null}},{key:"delete",value:function(e){if(this.root.index===e)this.root=new z;else if(this.root.left&&this.root.left.index===e)this.root.left=new z(this.root.left.index);else{if(!this.root.right||this.root.right.index!==e){if("FUNCTION"===this.root.node_type){for(var t=0;t<this.root.args.length;t++)this.root.args[t].index===e&&(this.root.args[t]=new z(this.root.args[t].index));return this._delete(this.root.args[0],e)||this._delete(this.root.args[1],e)||this._delete(this.root.args[2],e)||this._delete(this.root.args[3],e)||this._delete(this.root.args[4],e)||this._delete(this.root.args[5],e)||this._delete(this.root.args[6],e)||this._delete(this.root.args[7],e)||this._delete(this.root.args[8],e)||this._delete(this.root.args[9],e)}return this._delete(this.root.left,e)||this._delete(this.root.right,e)}this.root.right=new z(this.root.right.index)}}},{key:"_delete",value:function(e,t){if(e)if(e.index===t)e=new z(e.index);else if(e.left&&e.left.index===t)e.left=new z(e.left.index);else{if(!e.right||e.right.index!==t){if("FUNCTION"===e.node_type||"ARGS"===e.node_type){for(var n=0;n<e.args.length;n++)e.args[n].index===t&&(e.args[n]=new z(e.args[n].index));return this._delete(e.args[0],t)||this._delete(e.args[1],t)||this._delete(e.args[2],t)||this._delete(e.args[3],t)||this._delete(e.args[4],t)||this._delete(e.args[5],t)||this._delete(e.args[6],t)||this._delete(e.args[7],t)||this._delete(e.args[8],t)||this._delete(e.args[9],t)}return this._delete(e.left,t)||this._delete(e.right,t)}e.right=new z(e.right.index)}}},{key:"swap_with_left",value:function(e){var t=this.find(e),n=t.left;if(t){if("OPERATOR"!==t.node_type||"OPERATOR"!==n.node_type||"in"===n.value)return!1;var r=[n.value,t.value];t.value=r[0],n.value=r[1];var a=[n.type,t.type];t.type=a[0],n.type=a[1];var i=[n.expected_type,t.expected_type];t.expected_type=i[0],n.expected_type=i[1]}return!1}},{key:"swap_with_right",value:function(e){var t=this.find(e),n=t.right;if(t){if("OPERATOR"!==t.node_type||"OPERATOR"!==n.node_type||"in"===n.value)return!1;var r=[n.value,t.value];t.value=r[0],n.value=r[1];var a=[n.type,t.type];t.type=a[0],n.type=a[1];var i=[n.expected_type,t.expected_type];t.expected_type=i[0],n.expected_type=i[1]}return!1}},{key:"print",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&("OPERATOR"===e.node_type&&(t+="(",t=this.print(e.left,t),t+=" ",t+=e.value.toUpperCase(),t+=" ",t=this.print(e.right,t),t+=")"),"FUNCTION"!==e.node_type&&"ARGS"!==e.node_type||(t+=e.value.toUpperCase()+"(",e.args[0]&&(t=this.print(e.args[0],t)+", "),e.args[1]&&(t=this.print(e.args[1],t)+", "),e.args[2]&&(t=this.print(e.args[2],t)+", "),e.args[3]&&(t=this.print(e.args[3],t)+", "),e.args[4]&&(t=this.print(e.args[4],t)+", "),e.args[5]&&(t=this.print(e.args[5],t)+", "),e.args[6]&&(t=this.print(e.args[6],t)+", "),e.args[7]&&(t=this.print(e.args[7],t)+", "),e.args[8]&&(t=this.print(e.args[8],t)+", "),e.args[9]&&(t=this.print(e.args[9],t)),t+=")"),"OPERAND"===e.node_type&&("string"===e.type&&e.user_input?t+=' "':t+=" ",t+=e.value,"string"===e.type&&e.user_input?t+='" ':t+=" ")),t}}]),e}()),U=n(2),G=function(e){var t=e.setNode,n=e.onClose,r=l(),i=d(v),s=L.find(i),u=a.a.useState(s.user_input?s.value:""),p=Object(c.a)(u,2),b=p[0],h=p[1];return Object(U.jsxs)(o.a,{display:"flex",padding:1,maxWidth:"300px",children:[Object(U.jsx)(I.a,{autoFocus:!0,style:{alignSelf:"center",flexGrow:1},placeholder:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434",value:b,onChange:function(e){s.type=isNaN(parseInt(e.target.value))?"string":"number",h(e.target.value)}}),Object(U.jsx)(P.a,{onClick:function(e){r(f(b)),s.node_type="OPERAND",s.left=null,s.right=null,s.user_input=!0,s.type=isNaN(parseInt(b))?"string":"number",s.value=b,s.checkType(),t(s),r(y()),n&&n(e)},children:"Ok"})]})},M=n(142),B=n(144),W=n(147),H=n(145),q=n(73),J=n.n(q),V=n(156),Y=Object(T.a)((function(e){return Object(V.a)({root:{width:"100%",backgroundColor:e.palette.background.paper}})})),K=n(59),Q={n:"num",s:"str",b:"bool",d:"date"},X=function(e){var t=e.items,n=e.type,r=l(),i=d(v),s=Y(),o=a.a.useState(1),u=Object(c.a)(o,2),p=u[0],b=u[1];return Object(U.jsx)("div",{className:s.root,children:Object(U.jsx)(M.a,{component:"nav",children:t.map((function(e,a){return Object(U.jsxs)(B.a,{button:!0,selected:p===a,onClick:function(s){return function(e,a,s){e.stopPropagation(),b(a),r(f(s));var o=L.find(i);o&&(o.value=s,o.node_type=t[a].is_operator?"OPERATOR":"functions"===n?"FUNCTION":"OPERAND",o.left=null,o.right=null,o.user_input=!1,"functions"===n?(t[a].is_operator?(o.setLeft(t[a].arguments_types[0]),o.setArgs(t[a].arbitrary_args,t[a].arguments_types)):(o.args=[],o.addArguments(t[a].arguments_types),o.arbitrary_args=t[a].arbitrary_args),o.type=t[a].return_type):o.type=t[a].type,o.checkType(),r(y()))}(s,a,e.name)},children:[Object(U.jsx)(K.a,{variant:"subtitle2",style:{fontStyle:"italic",paddingRight:10},children:e.type?Q[e.type[0]]:Q[e.return_type[0]]}),Object(U.jsx)(H.a,{primary:e.name}),e.arguments_types?"("+e.arguments_types.join(",")+")":""]},a)}))})})},Z=new Map;Z.set("functions","\u0424\u0443\u043d\u043a\u0446\u0438\u0438"),Z.set("variables","\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"),Z.set("facts","\u0424\u0430\u043a\u0442\u044b"),Z.set("measures","\u041c\u0435\u0440\u044b");var $=Object(T.a)((function(){return{text:{width:"90%",margin:10,marginTop:0},wrapper:{width:"100%",overflow:"hidden",flexGrow:1,display:"flex",flexDirection:"column"},box:{flexGrow:1,overflow:"auto",width:"100%",maxHeight:300}}})),ee=function(e){var t=e.type,n=d(R),a=Object(r.useState)(""),i=Object(c.a)(a,2),s=i[0],u=i[1],l=Object(r.useState)(n[t.toUpperCase()]),p=Object(c.a)(l,2),b=p[0],h=p[1],f=$();return Object(r.useEffect)((function(){h((function(){return n[t.toUpperCase()].filter((function(e){return e.name.includes(s)}))}))}),[s]),Object(U.jsxs)(o.a,{className:f.wrapper,children:[Object(U.jsx)(I.a,{label:Z.get(t),className:f.text,value:s,onChange:function(e){return u(e.target.value)}}),Object(U.jsx)(o.a,{className:f.box,children:Object(U.jsx)(X,{items:b,type:t})})]})},te=n(146),ne=n(83),re=n.n(ne),ae=Object(T.a)((function(){return{list:{width:250},fullList:{width:"auto"},btn:{margin:5}}})),ie=Object(T.a)((function(e){return{mathIcon:{"&:before":{fontFamily:"MathIcon"}},eq:{"&:before":{content:'"\\f122"'}},ne:{"&:before":{content:'"\\f140"'}},gt:{"&:before":{content:'"\\f138"'}},gte:{"&:before":{content:'"\\f137"'}},lt:{"&:before":{content:'"\\f13a"'}},lte:{"&:before":{content:'"\\f13b"'}},plus:{"&:before":{content:'"\\f165"'}},mult:{"&:before":{content:'"\\f150"'}},or:{"&:before":{content:'"\\f142"'}},minus:{"&:before":{content:'"\\f14f"'}},in:{"&:before":{content:'"\\f134"'}},braces:{"&:before":{content:'"\\f15e"'}},union:{"&:before":{content:'"\\f17e"'}},divide:{"&:before":{content:'"\\f169"'}}}})),se=n(22),oe=n.n(se),ce=function(e){var t=e.value,n=ie();return Object(U.jsx)(U.Fragment,{children:function(e){switch(e){case"+":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.plus)});case"-":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.minus)});case"<":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.lt)});case"<=":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.lte)});case">":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.gt)});case">=":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.gte)});case"!=":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.ne)});case"==":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.eq)});case"*":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.mult)});case"/":return Object(U.jsx)(o.a,{className:oe()(n.mathIcon,n.divide)});default:return e}}(t)})},ue=function(e){var t=e.node,n=ae(),r=l(),a=d(R).OPERATORS;return Object(U.jsx)(o.a,{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",children:a.map((function(e){return Object(U.jsx)(P.a,{className:n.btn,onClick:function(n){n.stopPropagation(),r(f(e.name)),t&&(t.value=e.name,t.node_type="OPERATOR",t.right&&"ARGS"===t.right.node_type&&(t.right=new z(t.right.index)),t.user_input=!1,t.type=e.return_type,t.setLeft(e.arguments_types[0]),t.setRight(e.arguments_types[1])),t.checkType(),r(y())},variant:"outlined",size:"small",children:Object(U.jsx)(ce,{value:e.name})})}))})},le=n(43),de=n.n(le),pe=n(56),be=n.n(pe),he=n(72),fe=n.n(he),je=function(e){var t=e.value;return"string"===e.type?'"'===t[0]?Object(U.jsx)(o.a,{color:"brown",children:t}):Object(U.jsxs)(o.a,{color:"brown",children:['"',t,'"']}):Object(U.jsx)(ce,{value:parseFloat(t).toString()})},ge=function(e){var t=e.onClick,n=e.node,a=e.setNode,i=l(),s=Object(r.useState)(!1),u=Object(c.a)(s,2),d=u[0],p=u[1];return n.value?Object(U.jsxs)(P.a,{onClick:t,disableRipple:!0,style:{position:"relative"},onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},children:[Object(U.jsxs)(o.a,{display:"flex",flexDirection:"column",children:[n.type_error&&Object(U.jsxs)(K.a,{variant:"caption",style:{color:"red",fontSize:10},children:["expected: ",n.expected_type]}),Object(U.jsx)(o.a,{color:n.type_error?"red":"unset",children:n.user_input?Object(U.jsx)(je,{value:n.value,type:n.type}):Object(U.jsx)(ce,{value:n.value})})]}),d&&Object(U.jsx)(te.a,{size:"small",onClick:function(e){e.preventDefault(),e.stopPropagation(),L.delete(n.index);var t=L.find(n.index);a(t),i(y())},style:{position:"absolute",top:-5,right:-5},children:Object(U.jsx)(be.a,{style:{fontSize:15}})}),d&&n.left&&"OPERATOR"===n.left.node_type&&Object(U.jsx)(te.a,{size:"small",onClick:function(e){e.preventDefault(),e.stopPropagation(),L.swap_with_left(n.index),i(y())},style:{position:"absolute",top:7,left:-5},children:Object(U.jsx)(fe.a,{style:{fontSize:15}})}),d&&n.right&&"OPERATOR"===n.right.node_type&&Object(U.jsx)(te.a,{size:"small",onClick:function(e){e.preventDefault(),e.stopPropagation(),L.swap_with_right(n.index),i(y())},style:{position:"absolute",top:7,right:-5},children:Object(U.jsx)(fe.a,{style:{fontSize:15}})})]}):Object(U.jsx)(te.a,{onClick:t,children:Object(U.jsx)(de.a,{})})},ye=function(e){var t=e.index,n=a.a.useState(null),i=Object(c.a)(n,2),s=i[0],u=i[1],p=l(),b=a.a.useState(L.find(t)),h=Object(c.a)(b,2),f=h[0],g=h[1],y=a.a.useState(!1),m=Object(c.a)(y,2),x=m[0],O=m[1],v=a.a.useState(null),N=Object(c.a)(v,2),w=N[0],R=N[1],C=a.a.useState(!1),k=Object(c.a)(C,2),S=k[0],T=k[1],E=d(_);Object(r.useEffect)((function(){g(L.find(t))}),[t]),Object(r.useEffect)((function(){u(null),T(!1)}),[E]);var I=function(e){e.stopPropagation(),u(null),T(!1)},P=function(e){O(!0),R(e)},D=S?"simple-popover":void 0;return Object(U.jsxs)("div",{children:[Object(U.jsx)(ge,{node:f,onClick:function(e){e.stopPropagation(),u(e.currentTarget),T(!0),p(j(t))},setNode:g}),S&&Object(U.jsx)(A.a,{id:D,open:S,anchorEl:s,onClose:I,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(U.jsxs)(o.a,{position:"relative",maxWidth:"300px",children:[Object(U.jsx)(G,{setNode:g,onClose:I}),Object(U.jsx)(ue,{node:f}),Object(U.jsxs)(M.a,{component:"nav",children:[Object(U.jsxs)(B.a,{button:!0,onClick:function(e){e.stopPropagation(),P("variables")},children:[Object(U.jsx)(H.a,{primary:"\u041f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435"}),Object(U.jsx)(W.a,{style:{minWidth:0},children:Object(U.jsx)(J.a,{})})]},0),Object(U.jsxs)(B.a,{button:!0,onClick:function(e){e.stopPropagation(),P("functions")},children:[Object(U.jsx)(H.a,{primary:"\u0424\u0443\u043d\u043a\u0446\u0438\u0438"}),Object(U.jsx)(W.a,{style:{minWidth:0},children:Object(U.jsx)(J.a,{})})]},3)]}),x&&Object(U.jsxs)(o.a,{position:"absolute",left:"0px",top:"0px",width:"100%",overflow:"hidden",display:"flex",flexDirection:"column",height:"100%",bgcolor:"white",children:[Object(U.jsx)(te.a,{onClick:function(e){e.stopPropagation(),O(!1),R(null)},style:{marginTop:10,marginLeft:10,alignSelf:"flex-start"},children:Object(U.jsx)(re.a,{})}),function(){switch(w){case"functions":return Object(U.jsx)(ee,{type:"functions"});case"variables":return Object(U.jsx)(ee,{type:"variables"})}}()]})]})})]})},me=n(152),xe=function(e){var t=e.index,n=l(),i=a.a.useState(!1),s=Object(c.a)(i,2),u=s[0],p=s[1],b=a.a.useState(L.find(t)),h=Object(c.a)(b,2),f=h[0],g=h[1],y=d(_);Object(r.useEffect)((function(){p(!1)}),[y]);var m=function(e){return function(r){("keydown"!==r.type||"Tab"!==r.key&&"Shift"!==r.key)&&(e&&n(j(t)),p(e))}};return Object(U.jsxs)("div",{children:[Object(U.jsx)(ge,{node:f,onClick:m(!0),setNode:g}),Object(U.jsxs)(me.a,{anchor:"bottom",open:u,onClose:m(!1),children:[Object(U.jsx)(G,{setNode:g}),Object(U.jsx)(ue,{node:f}),Object(U.jsxs)(o.a,{display:"flex",children:[Object(U.jsx)(ee,{type:"functions"}),Object(U.jsx)(ee,{type:"variables"})]})]})]})},Oe=function(e){var t=e.index;return d(C)?Object(U.jsx)(xe,{index:t}):Object(U.jsx)(ye,{index:t})},_e=Object(T.a)({box:{cursor:"pointer",margin:5,padding:5,borderLeft:function(e){return e.state?"2px solid black":"none"},borderRight:function(e){return e.state?"2px solid black":"none"},flexDirection:function(e){return e.state?"column":"row"},alignItems:"center",display:"flex",borderRadius:10},typography:{margin:5,fontSize:25},mid:{padding:15,fontSize:25}}),ve=function(e){var t=e.node;switch(t.node_type){case"FUNCTION":return Object(U.jsx)(Ne,{node:t});case"OPERATOR":return Object(U.jsx)(ke,{node:t});default:return Object(U.jsx)(Oe,{index:t.index})}},Ne=function(e){var t=e.node,n=l(),a=Object(r.useState)(!1),i=Object(c.a)(a,2),s=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(c.a)(d,2),b=p[0],h=p[1],f=_e({state:s}),j=function(e){e.stopPropagation(),u(!s)};return Object(U.jsxs)(o.a,{display:"flex",alignItems:"center",color:t.type_error?"red":"unset",onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},children:[Object(U.jsx)(Oe,{index:t.index}),!s&&Object(U.jsx)(K.a,{className:f.typography,children:"("}),Object(U.jsxs)(o.a,{className:f.box,children:[t.args&&t.args.map((function(e,n){return n===t.args.length-1?Object(U.jsx)(ve,{node:e}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ve,{node:e}),Object(U.jsx)(K.a,{className:f.mid,onClick:j,children:","})]})})),t.arbitrary_args&&b&&t.args.length<10&&Object(U.jsx)(te.a,{size:"small",onClick:function(e){e.stopPropagation(),t.addArguments(),n(y())},children:Object(U.jsx)(de.a,{style:{fontSize:15}})})]}),!s&&Object(U.jsx)(K.a,{className:f.typography,children:")"})]})},we=Object(T.a)({box:{cursor:"pointer",margin:5,padding:5,borderLeft:function(e){return e.state?"2px solid black":"none"},borderRight:function(e){return e.state?"2px solid black":"none"},flexDirection:function(e){return e.state?"column":"row"},alignItems:"center",display:"flex",borderRadius:10},typography:{margin:5,fontSize:25},mid:{padding:15,fontSize:25}}),Re=function(e){var t=e.node,n=l(),a=Object(r.useState)(!1),i=Object(c.a)(a,2),s=i[0],u=i[1],d=Object(r.useState)(!1),p=Object(c.a)(d,2),b=p[0],h=p[1],f=we({state:s}),j=function(){return u(!s)},g=function(e){switch(e.node_type){case"FUNCTION":return Object(U.jsx)(Ne,{node:e});case"OPERATOR":return Object(U.jsx)(ke,{node:e});default:return Object(U.jsx)(Oe,{index:e.index})}};return Object(U.jsxs)(o.a,{display:"flex",alignItems:"center",onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},children:[!s&&Object(U.jsx)(K.a,{className:f.typography,children:"("}),Object(U.jsxs)(o.a,{className:f.box,children:[t.args&&t.args.map((function(e,n){return n===t.args.length-1?g(e):Object(U.jsxs)(U.Fragment,{children:[g(e),Object(U.jsx)(K.a,{className:f.mid,onClick:j,children:","})]})})),t.arbitrary_args&&b&&t.args.length<10&&Object(U.jsx)(te.a,{size:"small",onClick:function(e){e.stopPropagation(),t.addArguments(),n(y())},children:Object(U.jsx)(de.a,{style:{fontSize:15}})})]}),!s&&Object(U.jsx)(K.a,{className:f.typography,children:")"})]})},Ce=function(e){var t=e.node;switch(t.node_type){case"FUNCTION":return Object(U.jsx)(Ne,{node:t});case"OPERATOR":return Object(U.jsx)(ke,{node:t});case"ARGS":return Object(U.jsx)(Re,{node:t});default:return Object(U.jsx)(Oe,{index:t.index})}},ke=function(e){var t=e.node,n=d(N),a=Object(r.useState)(!1),i=Object(c.a)(a,2),s=i[0],u=i[1],l=E({state:s,brace:n});return Object(U.jsx)(P.a,{onClick:function(e){e.stopPropagation(),u(!s)},disableRipple:!0,children:Object(U.jsxs)(o.a,{className:l.box,color:t.type_error?"red":"unset",children:[t.left&&!t.type_error&&Object(U.jsx)(Ce,{node:t.left}),Object(U.jsx)(Oe,{index:t.index}),t.right&&!t.type_error&&Object(U.jsx)(Ce,{node:t.right})]})})},Se=Object(T.a)((function(){return{box:{width:1e3,height:700,margin:"auto",display:"flex",overflow:"auto",position:"relative"},inner_box:{margin:"auto"}}})),Te=n(84),Ee=n.n(Te),Ae=function(){var e=l();return Object(U.jsxs)(o.a,{position:"absolute",right:"-50px",display:"flex",flexDirection:"column",children:[Object(U.jsx)(te.a,{onClick:function(){return e(x())},children:Object(U.jsx)(Ee.a,{})}),Object(U.jsx)(te.a,{onClick:function(){return e(g())},children:"()"}),Object(U.jsx)(te.a,{onClick:function(){L.root=new z,e(y())},children:Object(U.jsx)(be.a,{})})]})},Ie=n(141),Pe=function(){var e=d(w),t=Se(),n=l();Object(r.useEffect)((function(){a(L.root)}),[e]);var a=function(e){return"OPERAND"===e.node_type?Object(U.jsx)(Oe,{index:e.index}):"FUNCTION"===e.node_type?Object(U.jsx)(Ne,{node:e}):Object(U.jsx)(ke,{node:e})};return Object(U.jsxs)(o.a,{margin:"auto",position:"relative",display:"flex",flexDirection:"column",children:[Object(U.jsx)(Ae,{}),Object(U.jsx)(Ie.a,{className:t.box,elevation:3,children:Object(U.jsx)(o.a,{className:t.inner_box,children:a(L.root)})}),Object(U.jsx)(P.a,{style:{alignSelf:"flex-end"},onClick:function(){return n(O())},children:"Ok"})]})},De={VARIABLES:[{name:"DISTANCE",type:"number"},{name:"LENGHT",type:"number"},{name:"HEIGHT",type:"number"},{name:"WEIGHT",type:"number"},{name:"LATITUDE",type:"number"},{name:"REPLICAS",type:"number"},{name:"CODE_GENDER",type:"string"},{name:"AMT_ANNUITY",type:"number"},{name:"CNT_FAM_MEMBERS",type:"string"}],OPERATORS:[{name:"and",return_type:"boolean",arguments_types:["boolean","boolean"]},{name:"or",return_type:"boolean",arguments_types:["boolean","boolean"]},{name:"+",return_type:"number",arguments_types:["number","number"]},{name:"-",return_type:"number",arguments_types:["number","number"]},{name:"*",return_type:"number",arguments_types:["number","number"]},{name:"/",return_type:"number",arguments_types:["number","number"]},{name:"<",return_type:"boolean",arguments_types:["any","any"]},{name:"<=",return_type:"boolean",arguments_types:["any","any"]},{name:"==",return_type:"boolean",arguments_types:["any","any"]},{name:"!=",return_type:"boolean",arguments_types:["any","any"]},{name:">",return_type:"boolean",arguments_types:["any","any"]},{name:">=",return_type:"boolean",arguments_types:["any","any"]},{name:"like",return_type:"boolean",arguments_types:["string","string"]},{name:"ilike",return_type:"boolean",arguments_types:["string","string"]},{name:"contains",return_type:"boolean",arguments_types:["string","string"]}],FUNCTIONS:[{name:"curent_date",return_type:"datetime",arguments_types:[]},{name:"current_time",return_type:"datetime",arguments_types:[]},{name:"current_timestamp",return_type:"number",arguments_types:[]},{name:"now",return_type:"datetime",arguments_types:[]},{name:"concat",arbitrary_args:!0,return_type:"string",arguments_types:["string"]},{name:"cahr_length",return_type:"number",arguments_types:["string"]},{name:"random",return_type:"number",arguments_types:[]},{name:"coalesce",arbitrary_args:!0,return_type:"any",arguments_types:["any"]},{name:"in",is_operator:!0,return_type:"boolean",arguments_types:["any"],arbitrary_args:!0},{name:"between",is_operator:!0,return_type:"boolean",arguments_types:["number","number"],arbitrary_args:!1},{name:"not_in",is_operator:!0,return_type:"boolean",arguments_types:["any"],arbitrary_args:!0},{name:"startwith",return_type:"boolean",arguments_types:["string"]},{name:"endwith",return_type:"boolean",arguments_types:["string"]},{name:"not",return_type:"boolean",arguments_types:["boolean"]},{name:"power",return_type:"number",arguments_types:["number","number"]},{name:"ln",return_type:"number",arguments_types:["number"]},{name:"exp",return_type:"number",arguments_types:["number"]},{name:"sqrt",return_type:"number",arguments_types:["number"]},{name:"abs",return_type:"number",arguments_types:["number"]},{name:"ceil",return_type:"number",arguments_types:["number"]},{name:"floor",return_type:"number",arguments_types:["number"]}]},Fe=n(153),ze=Object(T.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:800,margin:"auto"},divider:{height:28,margin:4},iconButton:{padding:10},input:{marginLeft:e.spacing(1),flex:1}}})),Le=n(85),Ue=n.n(Le),Ge=n(148),Me=function(){var e=ze(),t=l(),n=d(w);Object(r.useEffect)((function(){o(L.print(L.root,""))}),[n]);var a=Object(r.useState)(""),i=Object(c.a)(a,2),s=i[0],o=i[1];return Object(U.jsxs)(Ie.a,{className:e.root,children:[Object(U.jsx)(Fe.a,{className:e.input,placeholder:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430",inputProps:{"aria-label":"formula"},value:s}),Object(U.jsx)(Ge.a,{className:e.divider,orientation:"vertical"}),Object(U.jsx)(te.a,{color:"primary",className:e.iconButton,"aria-label":"builder",onClick:function(){return t(O())},children:Object(U.jsx)(Ue.a,{})})]})},Be=function(){var e=d(k),t=l();return Object(r.useEffect)((function(){t(m(De))}),[]),Object(U.jsx)(o.a,{display:"flex",height:"100vh",width:"100%",flexDirection:"column",justifyContent:"center",children:e?Object(U.jsx)(Me,{}):Object(U.jsx)(Pe,{})})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,158)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))},He=Object(p.a)({reducer:{code:S}});s.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(u.a,{store:He,children:Object(U.jsx)(Be,{})})}),document.getElementById("root")),We()}},[[108,1,2]]]);
//# sourceMappingURL=main.a3c3fa64.chunk.js.map